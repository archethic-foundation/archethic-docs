"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9216],{3905:(t,e,r)=>{r.d(e,{Zo:()=>g,kt:()=>h});var a=r(67294);function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},o=Object.keys(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var l=a.createContext({}),c=function(t){var e=a.useContext(l),r=e;return t&&(r="function"==typeof t?t(e):i(i({},e),t)),r},g=function(t){var e=c(t.components);return a.createElement(l.Provider,{value:e},t.children)},d="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var r=t.components,n=t.mdxType,o=t.originalType,l=t.parentName,g=s(t,["components","mdxType","originalType","parentName"]),d=c(r),p=n,h=d["".concat(l,".").concat(p)]||d[p]||u[p]||o;return r?a.createElement(h,i(i({ref:e},g),{},{components:r})):a.createElement(h,i({ref:e},g))}));function h(t,e){var r=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=r.length,i=new Array(o);i[0]=p;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[d]="string"==typeof t?t:n,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},98520:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=r(87462),n=(r(67294),r(3905));r(8209);const o={id:"build",title:"Smart Contracts Playground - Build",sidebar_label:"Build",sidebar_position:1},i=void 0,s={unversionedId:"build/smart-contracts/playground/build",id:"build/smart-contracts/playground/build",title:"Smart Contracts Playground - Build",description:"Let's create a small smart contracts that reacts to two different triggers. We'll then be able to test them separately.",source:"@site/docs/build/smart-contracts/playground/build.md",sourceDirName:"build/smart-contracts/playground",slug:"/build/smart-contracts/playground/build",permalink:"/build/smart-contracts/playground/build",draft:!1,tags:[],version:"current",lastUpdatedAt:1716905408,formattedLastUpdatedAt:"May 28, 2024",sidebarPosition:1,frontMatter:{id:"build",title:"Smart Contracts Playground - Build",sidebar_label:"Build",sidebar_position:1},sidebar:"docs",previous:{title:"Playground",permalink:"/build/smart-contracts/playground/"},next:{title:"Deploy",permalink:"/build/smart-contracts/playground/deploy"}},l={},c=[{value:"I. Write the contract",id:"i-write-the-contract",level:2},{value:"II. Test the triggers",id:"ii-test-the-triggers",level:2},{value:"Test trigger &#39;interval&#39;",id:"test-trigger-interval",level:3},{value:"Test trigger &#39;transaction&#39;",id:"test-trigger-transaction",level:3},{value:"Test trigger &#39;datetime&#39;",id:"test-trigger-datetime",level:3},{value:"Test trigger &#39;oracle&#39;",id:"test-trigger-oracle",level:3}],g={toc:c},d="wrapper";function u(t){let{components:e,...o}=t;return(0,n.kt)(d,(0,a.Z)({},g,o,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Let's create a small smart contracts that reacts to two different triggers. We'll then be able to test them separately."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'@version 1\n\nactions triggered_by: interval, at: "0 * * * *" do\n  Contract.set_content "Hello from interval"\nend\n\ncondition triggered_by: transaction, as: []\nactions triggered_by: transaction do\n  Contract.set_content "Hello from tx"\nend\n')),(0,n.kt)("h2",{id:"i-write-the-contract"},"I. Write the contract"),(0,n.kt)("p",null,"Write the code of the smart contract in the text area:\n",(0,n.kt)("img",{alt:"the contract is written in the textarea",src:r(58933).Z,width:"3600",height:"2390"})),(0,n.kt)("p",null,"As you write, you might see the console at the bottom reacting with different errors:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"a parsing error visible in the console",src:r(89566).Z,width:"3600",height:"2390"})),(0,n.kt)("h2",{id:"ii-test-the-triggers"},"II. Test the triggers"),(0,n.kt)("p",null,"To test a smart contract, you need to test all its triggers. We are going to open the trigger panel by clicking on the trigger button:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"the trigger button",src:r(97624).Z,width:"90",height:"67"})),(0,n.kt)("p",null,"The trigger panel opens on the left hand side:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"the trigger panel",src:r(13984).Z,width:"3600",height:"2390"})),(0,n.kt)("p",null,"You are now able to select which trigger you want to test, for this contract a selector of two triggers is displayed (as per the contract):\nYou'll also see the ",(0,n.kt)("a",{parentName:"p",href:"/build/smart-contracts/playground/mock-form"},"mock form")," that is used to mock the functions that does side-effect."),(0,n.kt)("h3",{id:"test-trigger-interval"},"Test trigger 'interval'"),(0,n.kt)("p",null,"An interval trigger is a contract that triggers automatically at a specific interval. It does not require anything so it's pretty easy to test. Just click on the ",(0,n.kt)("inlineCode",{parentName:"p"},"trigger")," button."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"the resulting transaction is displayed in the console",src:r(36179).Z,width:"3600",height:"2390"})),(0,n.kt)("p",null,"What you see above is the JSON representation of the output transaction payload. Here we can control that my contract behaved as expected. The ",(0,n.kt)("inlineCode",{parentName:"p"},"content"),' is set to "Hello from interval" as expected.'),(0,n.kt)("p",null,"You probably saw the ",(0,n.kt)("inlineCode",{parentName:"p"},"trigger and update contract's transaction")," button. Let's click on it to see the difference:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"the resulting transaction is displayed in the contract&#39; transaction panel",src:r(31325).Z,width:"3600",height:"2390"})),(0,n.kt)("p",null,"The difference is not easy to spot, but the transaction of the contract (the right panel) has been updated. This is useful to test a sequence of triggers."),(0,n.kt)("h3",{id:"test-trigger-transaction"},"Test trigger 'transaction'"),(0,n.kt)("p",null,"This trigger is more complex to test because it requires you to mock the transaction that should trigger the contract. After selecting the ",(0,n.kt)("inlineCode",{parentName:"p"},"transaction")," from the trigger selector, a form appears:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"the transaction form appears in the panel",src:r(25953).Z,width:"3600",height:"2390"})),(0,n.kt)("p",null,"This form is composed of two forms:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"the ",(0,n.kt)("a",{parentName:"li",href:"/build/smart-contracts/playground/transaction-form"},"transaction form")),(0,n.kt)("li",{parentName:"ol"},"the ",(0,n.kt)("a",{parentName:"li",href:"/build/smart-contracts/playground/mock-form"},"mock form"))),(0,n.kt)("p",null,"Which results in a very big form that are covered in the links above. For this contract, we'll just submit the form without changing anything."),(0,n.kt)("p",null,"I can now control that the output transaction payload is correct."),(0,n.kt)("h3",{id:"test-trigger-datetime"},"Test trigger 'datetime'"),(0,n.kt)("p",null,"Testing a 'datetime' trigger is similar to testing a trigger 'interval'."),(0,n.kt)("h3",{id:"test-trigger-oracle"},"Test trigger 'oracle'"),(0,n.kt)("p",null,"Testing an 'oracle' trigger is similar to testing a trigger 'transaction' (where the transaction is of type 'oracle')."),(0,n.kt)("admonition",{title:"That's it!",type:"success"},(0,n.kt)("p",{parentName:"admonition"},"You should now be able to build your own smart contracts and test them! The next step now is to ",(0,n.kt)("a",{parentName:"p",href:"/build/smart-contracts/playground/deploy"},"deploy them"),".")))}u.isMDXComponent=!0},58933:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_build_step1-d174efd7243f621764cf7dc42672f055.png"},36179:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_build_step2a-1b389fceb33d5b61491396bee90616f0.png"},25953:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_build_step2b-0ec2d5f241bbb36f96d1f11409ba1438.png"},31325:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_build_step2e-c1d5cb06bc75cc1e631aae66a1b3f715.png"},97624:(t,e,r)=>{r.d(e,{Z:()=>a});const a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABDCAYAAAAccRJRAAADjklEQVR4Xu2aPWgTYRjHn065LiYuTafExUSH4lLbJdrB1qVWoR+Cn6BFEcRBRBDBSRB3P1FbwU+wH6C1i20HPxZrF62DrYvpYq6LiUsvk77PyZVrzNd7uTxX6P8gZMj7Pv+73/3zfFzSEN/e/odw1J1AA0DXnbEtANAynAFaiDNAA7QUASEd5GiAFiIgJANHA7QQASEZOBqghQgIycDRAC1EQEgGjgZoIQJCMnD0RgO9o6WFwuFNvl52NpejL/NffY3pNdi6cPTezk5qb2v1eg1l932cnaM309N1ia0TNHDQRihEFy+cpxXLoonXk2RZeZ3zL7nWMELUs6+bGg2Drl677kvMWoIEDjoei9Hxo4fpRzpNj58+r+Va/tt77Mgh2hKP06Mnzyi9tORrbN1gAK1LzON6gPYITnfbugW9e1eKOtRL53j7/gO9Uy/nQOpw0SuVoxl0285WmpqaoYXFRbLy/4rklcuX7HenwHExTSYS1NW1h2Y/zQF0KWeWA8173A4tBtqJyzemcD0cXYWjeYDJLJtkmstr7lGho50Po9Emam6K0uf5eaSOQldzauhIpchoNOyPuMUbGR1fTRPFvgWlQLvXcjoZ6O+1Wzs+rBVLDS0za26CTu73Y21gxZAdu7+n2x5UTNMkQw0WzdEo/crm6ObtOyWvrRrQ586eoUg4QhkV11LxoyouDy6vJiYDgx0Y6FODJ2yw94aGV9PDQF8vbUsm6MXomCqA34vCrgQ6mdhKB/v76NvCIo2MjdsxOK2cHjxJPzMmPRh+6IdBtWMEBroYMKelK2zT3FdVCXSpGJX2aZPT3BAY6CAczank/tAGc7STo7lQcXcRVjl1cyRM2VyWbty660uO5lSRz1urRXFD5mgmybB50OBCVc+ugwsuDz7u1k/zm1/z8sBSh3Pmuk/vdHItBhaXP3RAO8+ueXs1z5gB2iNop3Xj7eVaQCc8QHsA7Qwh7mRZabgBaA+gvVQjgAZoL76pbY9OMdRVgqNdxJxOggeXl+pX8Lzqef04Qqo3P6B+Becng9V0KH5olosReB/NJ4f/ddT7Nrvi85QYj8d8+7dSLveb0umlQKdBN7514WjB+xmYFEALoQdogBYiICQDRwO0EAEhGTgaoIUICMnA0QAtREBIBo4GaCECQjJwNEALERCSgaMBWoiAkAwcDdBCBIRk4GiAFiIgJANHA7QQASEZOFoI9F+dpylcDyuw1AAAAABJRU5ErkJggg=="},89566:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_parse_error-ed4c0a0a7c8cb31134641160c5c416fd.png"},13984:(t,e,r)=>{r.d(e,{Z:()=>a});const a=r.p+"assets/images/playground_trigger_panel-8fdbf19ac3c721478edeccaa6aab9126.png"},8209:(t,e,r)=>{r(67294)}}]);