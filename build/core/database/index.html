<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Archethic&#x27;s database | Archethic</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://archethic-foundation.github.io/archethic-docs/archethic-docs/build/core/database"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Archethic&#x27;s database | Archethic"><meta data-react-helmet="true" name="description" content="Archethic is shipped with a custom database engine built from scratch to support an efficient data storage to support"><meta data-react-helmet="true" property="og:description" content="Archethic is shipped with a custom database engine built from scratch to support an efficient data storage to support"><link data-react-helmet="true" rel="icon" href="/archethic-docs/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://archethic-foundation.github.io/archethic-docs/archethic-docs/build/core/database"><link data-react-helmet="true" rel="alternate" href="https://archethic-foundation.github.io/archethic-docs/archethic-docs/build/core/database" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://archethic-foundation.github.io/archethic-docs/archethic-docs/build/core/database" hreflang="x-default"><link rel="stylesheet" href="/archethic-docs/assets/css/styles.71e143cc.css">
<link rel="preload" href="/archethic-docs/assets/js/runtime~main.b9a2af0e.js" as="script">
<link rel="preload" href="/archethic-docs/assets/js/main.aeada748.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/archethic-docs/"><div class="navbar__logo"><img src="/archethic-docs/img/archethic-white2.png" alt="Archethic Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/archethic-docs/img/archethic-white2.png" alt="Archethic Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Archethic</b></a><a class="navbar__item navbar__link" href="/archethic-docs/learn/archethic-intro">Learn</a><a class="navbar__item navbar__link" href="/archethic-docs/build/smart-contracts">Build</a><a class="navbar__item navbar__link" href="/archethic-docs/research/research-intro">Research</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/archethic-foundation/archethic-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/archethic-docs/learn/archethic-intro">Learn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/archethic-docs/build/smart-contracts">Build</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/archethic-docs/build/smart-contracts">Smart-Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Smart-Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/archethic-docs/build/sdk/js">SDKs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/archethic-docs/build/testnet">Testnet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core">Core development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/archethic-docs/build/core/database">Database</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core/p2p/messaging">P2P</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core/cryptography">Cryptography</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cryptography&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core/oracle-chain">OracleChain</a><button aria-label="Toggle the collapsible sidebar category &#x27;OracleChain&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core/beacon-chain">BeaconChain</a><button aria-label="Toggle the collapsible sidebar category &#x27;BeaconChain&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/archethic-docs/build/core/mining">Mining</a><button aria-label="Toggle the collapsible sidebar category &#x27;Mining&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/archethic-docs/build/core/account">Account</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/archethic-docs/build/core/bootstrap">Bootstrap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/archethic-docs/build/core/election">Election</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/archethic-docs/build/clients/wallet-spec">Client documentation</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archethic-docs/contributing">Contributing</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Archethic&#x27;s database</h1></header><p>Archethic is shipped with a custom database engine built from scratch to support an efficient data storage to support
concurrent writes and reads while avoiding much as I/O as possible.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rationale">Rationale<a class="hash-link" href="#rationale" title="Direct link to heading">â€‹</a></h2><p>Several solutions have been analyzed and uses from benchmarks, to implementation until the need to implement a solution which will fit the needs and requirements. (ie. LevelDB, RocksDB, Cassandra, ScyllaDB, Aerospike, Redis, etc.)</p><p>There are multiple database engines which provides different needs, but we wanted to focus on NoSQL and efficient disk amangement and writes. </p><p>Our choice ended with log structued family storages (instead of B-tree which are more read efficient, but suffer for random writes) </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="log-structured-merge">Log Structured Merge<a class="hash-link" href="#log-structured-merge" title="Direct link to heading">â€‹</a></h3><p>LSM (Log Structured Merge) comes with the immutable datastructures and append only writes.</p><p>Append only writes are really efficient in term of disk I/O as a single seek in the file is needed to be placed at the end of the file, and write the new data.</p><p>There are also shipped with inmemory structure which is flush over time while keeping this append-only log on disk for backup and safety measure. So those dumps are immutable and provided the database view at certain time.</p><p>But because most of the KeyValue database using LSM, involving updates of keys, they must manage the redundancy of the data and provide cleanup (deleted or updates entries).
To support this clean, they are using <code>compaction</code> which is a merge operation which take only the last data information from multiple immutable dumps. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="log-structured-hash-tables">Log Structured Hash Tables<a class="hash-link" href="#log-structured-hash-tables" title="Direct link to heading">â€‹</a></h3><p>Log Structured Hash Tables as Bitcask are really interesting as the writing and the reading are efficient because it&#x27;s using immutable data and key indexing in memory for a predictable and fast reading.</p><p>Its main requirement is to hold all the key of the value into the memory otherwise</p><p>This approach also invovles a <code>compaction</code> as data blocks are appended with immutability but needs to be merged after some time to avoid filesystem exhaustion.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="our-approach">Our approach<a class="hash-link" href="#our-approach" title="Direct link to heading">â€‹</a></h3><p>All those database Key-value, Wide column storage, etc.. which are using LSM are considered as global database to support different kind of use cases. However in our case, we have a specific need and requirements: <strong>we are only dealing with immutable data at all</strong>. The data stored in the transaction will never changed, and the mutation and views are managed from an application perspective but not from the disk itself.</p><p>Then we can reduce a lot of effort and I/O which are heavy in term of computations as compaction/merges, dump of memory structures</p><p>In additional to it, we can keep some indexing in memory while providing file backup to avoid memory exhaustion and be able to scale more.
Evenif we might the indexing on file not efficient, because we are using append only strategy for everything, the indexing is better as the last index bring the last update.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="design">Design<a class="hash-link" href="#design" title="Direct link to heading">â€‹</a></h2><p>So in order to fullfill all those requirements and optimize performances for our needs, we create a new data layer from scratch.
Nevertheless, we took concepts interesting from log structured and wide column storages to support efficient writes/reads with the support of nested column filtering.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="chains-storage">Chains storage<a class="hash-link" href="#chains-storage" title="Direct link to heading">â€‹</a></h3><p>The main concept is simple: <strong>each chain has its own file</strong>.</p><p>Each chain is uniquely identified by its <code>genesis address</code>: which is the address of the first&#x27;s previous public key, aka the 0th address.</p><p><img src="/archethic-docs/assets/images/write_transaction-6f6c3844fe612478890f193c06d1af99.png"></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The append-only strategy is straighforward, each time a new transaction in a chain is persisted, the transaction is added at the end of the file of a chain. So in term of disk access and I/O, it requires a simple seek at the end of the file and dumps of the transaction serialized. </p><p>This concept led to the streaming capability of the writes to avoid exhaustion of the system (as a backpressure mechanism)</p></div></div><p>So in order to be able to read specific columns from the transaction, the transaction is serialized in a specific format before to be written to disk.
This encoding wraps each key value of the transaction into self-descriptive and schema less write.
Each key/value pair is encoded in that way:</p><table><thead><tr><th>Column name size (1 byte)</th><th>Value size (32 byte)</th><th>Column name (binary)</th><th>Value (binary)</th></tr></thead><tbody><tr><td>7</td><td>33</td><td>Address</td><td>00743B809ADDE7E1E3E9B5AFB704813D06155958FBBB78CD052CC45A1B19F976BE</td></tr></tbody></table><p>However, because we are using a schemaless approach letting the code defining the encoding and decoding, each transaction is prepended by its size length (4 bytes) and its version.</p><p>So by this way, we know the boundaries of the transaction within a file and the way to decode it.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="chain-indexing">Chain indexing<a class="hash-link" href="#chain-indexing" title="Direct link to heading">â€‹</a></h3><p>Because each chain has its own file, we need also a mechanism to identify a transaction without a chain, or identify a transaction amongs the chains.</p><p>Different kind of indexing are performed some completly both in memory and disks for backup and long term storage.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="file-indexes">File indexes<a class="hash-link" href="#file-indexes" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_y2LR" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">â€‹</a></h5><p>To provide a way to find a transaction without knowing its genesis address, we implemented a summary index (as there are in other solutions) to help the identify the location of the data.
Then, as the <a href="/archethic-docs/learn/sharding/beacon-chain">BeaconChain</a> used this concept, we also applied the address&#x27;s subset identification here.
So each address contains a subset which is the first byte of the digest (exluding the metadata to identify curve and hash algorithm).</p><p>So each subset has its own index, with a list of transaction, genesis addresses, the transaction size and its offset (location in the chain&#x27;s genesis file)</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAAfCAYAAACYoBeiAAAKW3RFWHRteGZpbGUAJTNDbXhmaWxlJTIwaG9zdCUzRCUyMkVsZWN0cm9uJTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA0LTA3VDE1JTNBMjklM0ExMC4xNjlaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoTWFjaW50b3NoJTNCJTIwSW50ZWwlMjBNYWMlMjBPUyUyMFglMjAxMl8yXzEpJTIwQXBwbGVXZWJLaXQlMkY1MzcuMzYlMjAoS0hUTUwlMkMlMjBsaWtlJTIwR2Vja28pJTIwZHJhdy5pbyUyRjE0LjQuMiUyMENocm9tZSUyRjg3LjAuNDI4MC4xNDElMjBFbGVjdHJvbiUyRjExLjMuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjJFMzJvY2hNWnNQcTB0U09JbEtHQiUyMiUyMHZlcnNpb24lM0QlMjIxNC40LjIlMjIlMjB0eXBlJTNEJTIyZGV2aWNlJTIyJTIwcGFnZXMlM0QlMjIyJTIyJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIyS3ZUeTZfRm4xUEd2SXVrR0dCOG8lMjIlMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTNFNVZuWmNwc3dGUDBhVDUlMkZxQWNsZ2VNelNKVE5kTXBPMFNSOWxKSU5xR1htRUhKdDhmU1VRWmhGSm5NU3VNODZUMFJYYXpybjM2SEk5Z0dmejlSZUJGc2wzamdrYkFBZXZCJTJGQjhBSURyT3I3NjBaYTh0SVRodURURWdtTHpVbTI0b3ZmRUdCMWpYVkpNc3RhTGtuTW02YUp0akhpYWtraTJiRWdJdm1xJTJGTnVXc3Zlb0N4Y1F5WEVXSTJkWWJpbVZTbmNzUDY0NnZoTWFKV1RvQTVueHpWTDFzVHBJbENQTlZ3d1ElMkZEZUNaNEZ5V1QlMkZQMUdXRWF2QXFYY3R6bkIzbzNHeE1rbGRzTVdGNndrNyUyQjM5NU5mRnhlJTJGNVk4JTJGbDluNk92Z1ltTDNKdkRxdzRNc1VFejNHR2NCVExtVENZNTRpOW8zemhUSzZ5dmlYU0prYnF0QlNjbVZLNUp5WlhyVWRrZCUyQmE4VVhqajI0TXZhcDV2bTUybnVmTjFpVVJkRTRrRWNaWWJvOWdpNlQ2MUpWWElCRVQlMkJjaFJ4eHZNbGJNU3JsWVJ1Um9uQ0VPUzNyWG5SOFpyNHMxN202R1huS3FWZ1dNOEhIamUwUFZkRURwUVBRZk9HSll6R0hkM2ZhYzlZOGFYSWlKbWtwb3Q5ZERZVlcwcU9Id0duOGI1N2hCYm1oTlpCQ3MlMkZYT2pIbEV2MWM3cEtxQ1JYQ3hScDIwb0ZjWnZOQ1lwbWNlRVRQNWVTMFpRWU8wWmk5bE9Ob3JMZ2IlMkJob2VxZVVzVFBPdUNoV2d0Z2pBUjRwZXlZRm41RkdUd0FtMFBjMyUyRk40UkljbjZjWVp0NXN3QVdFRnNJQWNqMDE3VjhWcTlralFpTlhRZTVycEZ5M001Q0olMkZtZ0tUNFJJdFRRWVBHVk9HWkpVWFV1VzM4dGYwU1NSVVJhV0VCRHR3QVdna1NzS0dmVHFjZ2l2cWd4JTJGN0U5JTJGeG5oSllOZkFOWXJ3Zll5dmJLeUhLZERxJTJGdWRxRmtUZVElMkZOVkVwSFh1THlXcTVoa09jTUJxUkQ1bSUyQnR4SkVVOHMlMkZWRFRJdGglMkIwZVRSTzB5VGRtQkNqc2ZhVVNKR29WZlJVeHhaVjk5bUo2WmhUak5sRGdkOFclMkYxMEVwOWZHSHZZRTU0Ym9waE9CZlVXbk83TFl1QkVLQ1gyRkNKUm1LSktVSHpFamJqaFdWM0hyam5JT3pvbG5jWEpPczlueGtoQjJGQWtlbkFIZll1QTdtWE16ODN2Z3dBME96UUdBZHA2Z2J1Y3IwelFvdmpvJTJGMyUyRmJlVnhzcEx0akh2TWFrbTAlMkZtM21VSzlJcmslMkIzWE9iV2ZGMTQ5SWZaVWdMd1NQU0phOVBFZnVwc09JQk5QZW5NeVBBaktaN2tqZmc0NWY5MmtMOUd5JTJGaG52VGxzQ0MlMkY4Z3doJTJCT09udmRveWFoSFNycUo2TzRnMyUyQkliNU1nZ0R3OE1lWVh3TnBCSHVZSVBFd0czQUwyVSUyQjIlMkJUcDFqSVNyMTN2ZDNnTzRJZEdRRTJ2bjFmMWQ3ZThMWHo5aXBEY1RTWWE1ckd4NXVzak1DYnkxYmVZYWxwMUxsYkQxNXFBdmJWYXBVV0hJU3hVQUpQc2lNT2owNE5zTGZNMEhjZDdDMDhLdm5jYVdWOVRXVlJXQjk2SVRSdFhWdDNodzZzMm5WeFhUZnlSdVBscGZVdHZ3TjJYMXYzTzdYMXRnU09POXh0V3c4Y2RWT0g3cDIxNTNvZ2ROJTJCZmN2cndqU2tudE5NMVd6bG5KRDlpMGZUZCUyRnllYXFsbiUyRjAxa0dVdjElMkZNZnowRHclM0QlM0QlM0MlMkZkaWFncmFtJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIycks0NDJQRWN6SENtODBLaHBXWl8lMjIlMjBuYW1lJTNEJTIyUGFnZS0yJTIyJTNFNVZkTmI2TXdFUDAxSEN1QlRSeHkzSkp1VjZ1MnFwUkR0MGNYRDhHcVlTTEhLV1IlMkYlMkZacGdBcFJXVmFWMGhWSTRZTCUyRjVNUFBteVpZOUd1ZlZ0ZWFiN0JZRktJJTJGNG92TG8waU1rQ0h4bVB6V3liNURGWXQ0QWF5MkZjJTJCcUFsZndMRHZRZHVwTUN0Z05IZzZpTTNBekJCSXNDRWpQQXVOWllEdDFTVk1OVk4zd05JMkNWY0RWR0g2UXdXVnNYVzNTR1h5RFhtVnM2SXE2JTJCbkxmT3JwSnR4Z1dXUFloZWVUVFdpS1laNVZVTXFpYXY1ZVVtZTBhMXFuN2ZjWHdReFRKJTJCTkglMkZ1TDVwa1B6OFRjaXhCUTJGT201bzBxViUyQjQyam0lMkJ2TkQlMkZvV1FDYmRGbTN6S3BjVmNJcUxQNUhyMHNNMmxndGVGSmJTMnRkaXlXbVZ6WldXQ0hxVlFxUm9YNkVFc0ZoeWhOTEw0MUdwJTJCaFoyRkpCRSUyQnB0YmclMkZBVzJnZXRXNkQlMkJvT2pzMndLZ2JNd2VpOWpXdXpNRmVLRXpEeDNienM1QkE1S09zSmdUcU1Pd0d1ajVrN2t1M0E4ZndKenVtN25BY241VHhOVTVLOHlibGdUMnpHdnBCekVrNk04M0RFZWVDZlZ1SHBySDdmVlBqaHFTT3dNRDI4ZWI2d0M1Uk1yQXV6VVJmT3ZnZWhQN0Vlc1BQZjhjTm9ZcHpQMyUyQldjbk11T1A1dmFLUnVOT0NmbnYlMkJPenFaMjdpJTJCOTQ3czclMkYzN2xycDkwRjVHRHJYZVBvMVQ4JTNEJTNDJTJGZGlhZ3JhbSUzRSUzQyUyRm14ZmlsZSUzRYZV1hcAABGn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"></p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="addresses">Addresses<a class="hash-link" href="#addresses" title="Direct link to heading">â€‹</a></h5><p>One principle of the transaction chain is to able to target any address of a chain as recipient.
So during the transaction validation, nodes are able to resolve recipient last address and then target the right shard of the chain. They are doing this resolution by asking the recipient shard about the last transaction address.</p><p>But in order to make this possible, previous nodes of a given chain need to keep a track of the last transaction of the chain.</p><p>Then a specific index file is provided (<code>&quot;Genesis-address&quot;-addresses</code>) for this purpose which contains a given chain (genesis file), a list of timestamps and addresses for this chain. </p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAAAfCAYAAAB5/X8CAAAM+nRFWHRteGZpbGUAJTNDbXhmaWxlJTIwaG9zdCUzRCUyMkVsZWN0cm9uJTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA0LTA3VDE1JTNBMzUlM0E0Ny4zMDlaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoTWFjaW50b3NoJTNCJTIwSW50ZWwlMjBNYWMlMjBPUyUyMFglMjAxMl8yXzEpJTIwQXBwbGVXZWJLaXQlMkY1MzcuMzYlMjAoS0hUTUwlMkMlMjBsaWtlJTIwR2Vja28pJTIwZHJhdy5pbyUyRjE0LjQuMiUyMENocm9tZSUyRjg3LjAuNDI4MC4xNDElMjBFbGVjdHJvbiUyRjExLjMuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjJsZV9hWU5weHdJRG03ajQ0ZTFyLSUyMiUyMHZlcnNpb24lM0QlMjIxNC40LjIlMjIlMjB0eXBlJTNEJTIyZGV2aWNlJTIyJTIwcGFnZXMlM0QlMjIzJTIyJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIyS3ZUeTZfRm4xUEd2SXVrR0dCOG8lMjIlMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTNFNVZuWmNwc3dGUDBhVDUlMkZxQWNsZ2VNelNKVE5kTXBPMFNSOWxKSU5xR1htRUhKdDhmU1VRWmhGSm5NU3VNODZUMFJYYXpybjM2SEk5Z0dmejlSZUJGc2wzamdrYkFBZXZCJTJGQjhBSURyT3I3NjBaYTh0SVRodURURWdtTHpVbTI0b3ZmRUdCMWpYVkpNc3RhTGtuTW02YUp0akhpYWtraTJiRWdJdm1xJTJGTnVXc3Zlb0N4Y1F5WEVXSTJkWWJpbVZTbmNzUDY0NnZoTWFKV1RvQTVueHpWTDFzVHBJbENQTlZ3d1ElMkZEZUNaNEZ5V1QlMkZQMUdXRWF2QXFYY3R6bkIzbzNHeE1rbGRzTVdGNndrNyUyQjM5NU5mRnhlJTJGNVk4JTJGbDluNk92Z1ltTDNKdkRxdzRNc1VFejNHR2NCVExtVENZNTRpOW8zemhUSzZ5dmlYU0prYnF0QlNjbVZLNUp5WlhyVWRrZCUyQmE4VVhqajI0TXZhcDV2bTUybnVmTjFpVVJkRTRrRWNaWWJvOWdpNlQ2MUpWWElCRVQlMkJjaFJ4eHZNbGJNU3JsWVJ1Um9uQ0VPUzNyWG5SOFpyNHMxN202R1huS3FWZ1dNOEhIamUwUFZkRURwUVBRZk9HSll6R0hkM2ZhYzlZOGFYSWlKbWtwb3Q5ZERZVlcwcU9Id0duOGI1N2hCYm1oTlpCQ3MlMkZYT2pIbEV2MWM3cEtxQ1JYQ3hScDIwb0ZjWnZOQ1lwbWNlRVRQNWVTMFpRWU8wWmk5bE9Ob3JMZ2IlMkJob2VxZVVzVFBPdUNoV2d0Z2pBUjRwZXlZRm41RkdUd0FtMFBjMyUyRk40UkljbjZjWVp0NXN3QVdFRnNJQWNqMDE3VjhWcTlralFpTlhRZTVycEZ5M001Q0olMkZtZ0tUNFJJdFRRWVBHVk9HWkpVWFV1VzM4dGYwU1NSVVJhV0VCRHR3QVdna1NzS0dmVHFjZ2l2cWd4JTJGN0U5JTJGeG5oSllOZkFOWXJ3Zll5dmJLeUhLZERxJTJGdWRxRmtUZVElMkZOVkVwSFh1THlXcTVoa09jTUJxUkQ1bSUyQnR4SkVVOHMlMkZWRFRJdGglMkIwZVRSTzB5VGRtQkNqc2ZhVVNKR29WZlJVeHhaVjk5bUo2WmhUak5sRGdkOFclMkYxMEVwOWZHSHZZRTU0Ym9waE9CZlVXbk83TFl1QkVLQ1gyRkNKUm1LSktVSHpFamJqaFdWM0hyam5JT3pvbG5jWEpPczlueGtoQjJGQWtlbkFIZll1QTdtWE16ODN2Z3dBME96UUdBZHA2Z2J1Y3IwelFvdmpvJTJGMyUyRmJlVnhzcEx0akh2TWFrbTAlMkZtM21VSzlJcmslMkIzWE9iV2ZGMTQ5SWZaVWdMd1NQU0phOVBFZnVwc09JQk5QZW5NeVBBaktaN2tqZmc0NWY5MmtMOUd5JTJGaG52VGxzQ0MlMkY4Z3doJTJCT09udmRveWFoSFNycUo2TzRnMyUyQkliNU1nZ0R3OE1lWVh3TnBCSHVZSVBFd0czQUwyVSUyQjIlMkJUcDFqSVNyMTN2ZDNnTzRJZEdRRTJ2bjFmMWQ3ZThMWHo5aXBEY1RTWWE1ckd4NXVzak1DYnkxYmVZYWxwMUxsYkQxNXFBdmJWYXBVV0hJU3hVQUpQc2lNT2owNE5zTGZNMEhjZDdDMDhLdm5jYVdWOVRXVlJXQjk2SVRSdFhWdDNodzZzMm5WeFhUZnlSdVBscGZVdHZ3TjJYMXYzTzdYMXRnU09POXh0V3c4Y2RWT0g3cDIxNTNvZ2ROJTJCZmN2cndqU2tudE5NMVd6bG5KRDlpMGZUZCUyRnllYXFsbiUyRjAxa0dVdjElMkZNZnowRHclM0QlM0QlM0MlMkZkaWFncmFtJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIycks0NDJQRWN6SENtODBLaHBXWl8lMjIlMjBuYW1lJTNEJTIyUGFnZS0yJTIyJTNFNVZkTmI2TXdFUDAxSEN1QlRSeHkzSkp1VjZ1MnFwUkR0MGNYRDhHcVlTTEhLV1IlMkYlMkZacGdBcFJXVmFWMGhWSTRZTCUyRjVNUFBteVpZOUd1ZlZ0ZWFiN0JZRktJJTJGNG92TG8waU1rQ0h4bVB6V3liNURGWXQ0QWF5MkZjJTJCcUFsZndMRHZRZHVwTUN0Z05IZzZpTTNBekJCSXNDRWpQQXVOWllEdDFTVk1OVk4zd05JMkNWY0RWR0g2UXdXVnNYVzNTR1h5RFhtVnM2SXE2JTJCbkxmT3JwSnR4Z1dXUFloZWVUVFdpS1laNVZVTXFpYXY1ZVVtZTBhMXFuN2ZjWHdReFRKJTJCTkglMkZ1TDVwa1B6OFRjaXhCUTJGT201bzBxViUyQjQyam0lMkJ2TkQlMkZvV1FDYmRGbTN6S3BjVmNJcUxQNUhyMHNNMmxndGVGSmJTMnRkaXlXbVZ6WldXQ0hxVlFxUm9YNkVFc0ZoeWhOTEw0MUdwJTJCaFoyRkpCRSUyQnB0YmclMkZBVzJnZXRXNkQlMkJvT2pzMndLZ2JNd2VpOWpXdXpNRmVLRXpEeDNienM1QkE1S09zSmdUcU1Pd0d1ajVrN2t1M0E4ZndKenVtN25BY241VHhOVTVLOHlibGdUMnpHdnBCekVrNk04M0RFZWVDZlZ1SHBySDdmVlBqaHFTT3dNRDI4ZWI2d0M1Uk1yQXV6VVJmT3ZnZWhQN0Vlc1BQZjhjTm9ZcHpQMyUyQldjbk11T1A1dmFLUnVOT0NmbnYlMkJPenFaMjdpJTJCOTQ3czclMkYzN2xycDkwRjVHRHJYZVBvMVQ4JTNEJTNDJTJGZGlhZ3JhbSUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMnZETHdETjlxQkZkTHVKRlhfNzB2JTIyJTIwbmFtZSUzRCUyMlBhZ2UtMyUyMiUzRTNaVmJUOEl3R0laJTJGelM1TmVzQzVYU0o0VEV3MFN5UmUxdllycTNZcmxvNkJ2OTRDSFdPQ01ScFA4V3J0JTJCeDI2NyUyQm1iTktLRFluNW0yU1MlMkZNZ0owUkpDWVIzUVlFWUl4aXYxbnFTeldTcG9lcllXeFZTSWt0VUttbmlHSUtLaVZFakR0SkRwanRGT1Ryc2hOV1FKM0hZMVphJTJCcHVtalM2ZSUyQnFFaldGSHlEalR1JTJCcElDWmMzYzhWcEd6Z0hOYzdEMFFrSjh4V3NTUTZUVEhNbVRMMGwwWk9JRHF3eGJyMHE1Z1BRUzNnTkZ6NFRmWFZIMDRkS1A1ME5ieDl2YmxKNnNHNTIlMkJwR1N6UWdXU3ZmcDFyMVptYkclMkJ1cjAlMkJ5QzR2Sk1aeVZEVWxhTVowRlhoRlBkVFhpa000ZE9vV0RVbHJxbExBc2h1SzZIR2RLd2ZaaFBGbHRQYmU4VnJ1Q3UxMzJDJTJCbDBucGd0TEdyV2lvWUpKSjdmZXFzZVlTdFNNd1R1SmMlMkJFdjRFcklQNXE2dDdaMjY4dVF6dllqQUZPTHZ3ZFUyWE9Bd1pERXhRMk5ldEhaSWc1VnRHb0VGandZRGpUZWNXc2w4RXpoOWdqbmVZWTRRUjZxWGtTNUZMS1FuZmkxekU5JTJGRmglMkZJM0lrejlHbkx6cDhxOUYlMkZvc3VwJTJCU1BNYWY3WFg2WTB2JTJGaWN0TDdNZVIlMkIyNzR6cTlqV2EwMVBYZ0ElM0QlM0MlMkZkaWFncmFtJTNFJTNDJTJGbXhmaWxlJTNFuJ3r+wAADZVJREFUeF7tnHk81Vkfxz8V00oLbTwttCiTlKl5WmifUimVQotpYkp7aS+TaEFJWoQS2oRopcRkCaNdEpElLWiRNdNC6nmdY+59KJq591yNcs5/fvd3zu/8Pvdz3+d7vt9Tde6e1/8A3pgUcEqax9S/Nnee3825Nr++RN6d+49NxjoEgt01V7GNUot7J0Ztg5TGsVqsAMurf8C7mOng/hNfQ+4/8bUjPXcfiwSHIJuG4CZkEZBDkEU90pf7j01BDkE2/WhvbkIWETkEWdTj/mNVj0eC7ApyCDJqyCHIKCBfhBkF5JEg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"></p><p>The timestamp is useful during replication and validation to be sure to get the last chain address at the time of the validation, so we can reproduce the validation later without problem.</p><p>However during the transaction validation we keep the latest one.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="keys">Keys<a class="hash-link" href="#keys" title="Direct link to heading">â€‹</a></h5><p>Sometimes we also want to identify the genesis address or first public key of a chain.
But we need to track it as well.</p><p>For instance, in smart contract code, we want to do some actions depending if a transaction&#x27;s coming from a specific person, but how to identify it, as its transaction chain evolves and we don&#x27;t keep a track of all the transactions.</p><p>Then being able to identify the first transaction of a chain is important.</p><p>So we are adding a new chain index file (<code>&quot;Genesis address&quot;-key</code>) to support this feature.</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAAAfCAYAAAB5/X8CAAAPe3RFWHRteGZpbGUAJTNDbXhmaWxlJTIwaG9zdCUzRCUyMkVsZWN0cm9uJTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA0LTA3VDE1JTNBNDElM0E1OS43ODBaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoTWFjaW50b3NoJTNCJTIwSW50ZWwlMjBNYWMlMjBPUyUyMFglMjAxMl8yXzEpJTIwQXBwbGVXZWJLaXQlMkY1MzcuMzYlMjAoS0hUTUwlMkMlMjBsaWtlJTIwR2Vja28pJTIwZHJhdy5pbyUyRjE0LjQuMiUyMENocm9tZSUyRjg3LjAuNDI4MC4xNDElMjBFbGVjdHJvbiUyRjExLjMuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjJYZGR3Z1V6WG9rZngyd3l3NXNRaCUyMiUyMHZlcnNpb24lM0QlMjIxNC40LjIlMjIlMjB0eXBlJTNEJTIyZGV2aWNlJTIyJTIwcGFnZXMlM0QlMjI0JTIyJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIyS3ZUeTZfRm4xUEd2SXVrR0dCOG8lMjIlMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTNFNVZuWmNwc3dGUDBhVDUlMkZxQWNsZ2VNelNKVE5kTXBPMFNSOWxKSU5xR1htRUhKdDhmU1VRWmhGSm5NU3VNODZUMFJYYXpybjM2SEk5Z0dmejlSZUJGc2wzamdrYkFBZXZCJTJGQjhBSURyT3I3NjBaYTh0SVRodURURWdtTHpVbTI0b3ZmRUdCMWpYVkpNc3RhTGtuTW02YUp0akhpYWtraTJiRWdJdm1xJTJGTnVXc3Zlb0N4Y1F5WEVXSTJkWWJpbVZTbmNzUDY0NnZoTWFKV1RvQTVueHpWTDFzVHBJbENQTlZ3d1ElMkZEZUNaNEZ5V1QlMkZQMUdXRWF2QXFYY3R6bkIzbzNHeE1rbGRzTVdGNndrNyUyQjM5NU5mRnhlJTJGNVk4JTJGbDluNk92Z1ltTDNKdkRxdzRNc1VFejNHR2NCVExtVENZNTRpOW8zemhUSzZ5dmlYU0prYnF0QlNjbVZLNUp5WlhyVWRrZCUyQmE4VVhqajI0TXZhcDV2bTUybnVmTjFpVVJkRTRrRWNaWWJvOWdpNlQ2MUpWWElCRVQlMkJjaFJ4eHZNbGJNU3JsWVJ1Um9uQ0VPUzNyWG5SOFpyNHMxN202R1huS3FWZ1dNOEhIamUwUFZkRURwUVBRZk9HSll6R0hkM2ZhYzlZOGFYSWlKbWtwb3Q5ZERZVlcwcU9Id0duOGI1N2hCYm1oTlpCQ3MlMkZYT2pIbEV2MWM3cEtxQ1JYQ3hScDIwb0ZjWnZOQ1lwbWNlRVRQNWVTMFpRWU8wWmk5bE9Ob3JMZ2IlMkJob2VxZVVzVFBPdUNoV2d0Z2pBUjRwZXlZRm41RkdUd0FtMFBjMyUyRk40UkljbjZjWVp0NXN3QVdFRnNJQWNqMDE3VjhWcTlralFpTlhRZTVycEZ5M001Q0olMkZtZ0tUNFJJdFRRWVBHVk9HWkpVWFV1VzM4dGYwU1NSVVJhV0VCRHR3QVdna1NzS0dmVHFjZ2l2cWd4JTJGN0U5JTJGeG5oSllOZkFOWXJ3Zll5dmJLeUhLZERxJTJGdWRxRmtUZVElMkZOVkVwSFh1THlXcTVoa09jTUJxUkQ1bSUyQnR4SkVVOHMlMkZWRFRJdGglMkIwZVRSTzB5VGRtQkNqc2ZhVVNKR29WZlJVeHhaVjk5bUo2WmhUak5sRGdkOFclMkYxMEVwOWZHSHZZRTU0Ym9waE9CZlVXbk83TFl1QkVLQ1gyRkNKUm1LSktVSHpFamJqaFdWM0hyam5JT3pvbG5jWEpPczlueGtoQjJGQWtlbkFIZll1QTdtWE16ODN2Z3dBME96UUdBZHA2Z2J1Y3IwelFvdmpvJTJGMyUyRmJlVnhzcEx0akh2TWFrbTAlMkZtM21VSzlJcmslMkIzWE9iV2ZGMTQ5SWZaVWdMd1NQU0phOVBFZnVwc09JQk5QZW5NeVBBaktaN2tqZmc0NWY5MmtMOUd5JTJGaG52VGxzQ0MlMkY4Z3doJTJCT09udmRveWFoSFNycUo2TzRnMyUyQkliNU1nZ0R3OE1lWVh3TnBCSHVZSVBFd0czQUwyVSUyQjIlMkJUcDFqSVNyMTN2ZDNnTzRJZEdRRTJ2bjFmMWQ3ZThMWHo5aXBEY1RTWWE1ckd4NXVzak1DYnkxYmVZYWxwMUxsYkQxNXFBdmJWYXBVV0hJU3hVQUpQc2lNT2owNE5zTGZNMEhjZDdDMDhLdm5jYVdWOVRXVlJXQjk2SVRSdFhWdDNodzZzMm5WeFhUZnlSdVBscGZVdHZ3TjJYMXYzTzdYMXRnU09POXh0V3c4Y2RWT0g3cDIxNTNvZ2ROJTJCZmN2cndqU2tudE5NMVd6bG5KRDlpMGZUZCUyRnllYXFsbiUyRjAxa0dVdjElMkZNZnowRHclM0QlM0QlM0MlMkZkaWFncmFtJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIycks0NDJQRWN6SENtODBLaHBXWl8lMjIlMjBuYW1lJTNEJTIyUGFnZS0yJTIyJTNFNVZkTmI2TXdFUDAxSEN1QlRSeHkzSkp1VjZ1MnFwUkR0MGNYRDhHcVlTTEhLV1IlMkYlMkZacGdBcFJXVmFWMGhWSTRZTCUyRjVNUFBteVpZOUd1ZlZ0ZWFiN0JZRktJJTJGNG92TG8waU1rQ0h4bVB6V3liNURGWXQ0QWF5MkZjJTJCcUFsZndMRHZRZHVwTUN0Z05IZzZpTTNBekJCSXNDRWpQQXVOWllEdDFTVk1OVk4zd05JMkNWY0RWR0g2UXdXVnNYVzNTR1h5RFhtVnM2SXE2JTJCbkxmT3JwSnR4Z1dXUFloZWVUVFdpS1laNVZVTXFpYXY1ZVVtZTBhMXFuN2ZjWHdReFRKJTJCTkglMkZ1TDVwa1B6OFRjaXhCUTJGT201bzBxViUyQjQyam0lMkJ2TkQlMkZvV1FDYmRGbTN6S3BjVmNJcUxQNUhyMHNNMmxndGVGSmJTMnRkaXlXbVZ6WldXQ0hxVlFxUm9YNkVFc0ZoeWhOTEw0MUdwJTJCaFoyRkpCRSUyQnB0YmclMkZBVzJnZXRXNkQlMkJvT2pzMndLZ2JNd2VpOWpXdXpNRmVLRXpEeDNienM1QkE1S09zSmdUcU1Pd0d1ajVrN2t1M0E4ZndKenVtN25BY241VHhOVTVLOHlibGdUMnpHdnBCekVrNk04M0RFZWVDZlZ1SHBySDdmVlBqaHFTT3dNRDI4ZWI2d0M1Uk1yQXV6VVJmT3ZnZWhQN0Vlc1BQZjhjTm9ZcHpQMyUyQldjbk11T1A1dmFLUnVOT0NmbnYlMkJPenFaMjdpJTJCOTQ3czclMkYzN2xycDkwRjVHRHJYZVBvMVQ4JTNEJTNDJTJGZGlhZ3JhbSUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMnZETHdETjlxQkZkTHVKRlhfNzB2JTIyJTIwbmFtZSUzRCUyMlBhZ2UtMyUyMiUzRTNaVmJUOEl3R0laJTJGelM1TmVzQzVYU0o0VEV3MFN5UmUxdllycTNZcmxvNkJ2OTRDSFdPQ01ScFA4V3J0JTJCeDI2NyUyQm1iTktLRFluNW0yU1MlMkZNZ0owUkpDWVIzUVlFWUl4aXYxbnFTeldTcG9lcllXeFZTSWt0VUttbmlHSUtLaVZFakR0SkRwanRGT1Ryc2hOV1FKM0hZMVphJTJCcHVtalM2ZSUyQnFFaldGSHlEalR1JTJCcElDWmMzYzhWcEd6Z0hOYzdEMFFrSjh4V3NTUTZUVEhNbVRMMGwwWk9JRHF3eGJyMHE1Z1BRUzNnTkZ6NFRmWFZIMDRkS1A1ME5ieDl2YmxKNnNHNTIlMkJwR1N6UWdXU3ZmcDFyMVptYkclMkJ1cjAlMkJ5QzR2Sk1aeVZEVWxhTVowRlhoRlBkVFhpa000ZE9vV0RVbHJxbExBc2h1SzZIR2RLd2ZaaFBGbHRQYmU4VnJ1Q3UxMzJDJTJCbDBucGd0TEdyV2lvWUpKSjdmZXFzZVlTdFNNd1R1SmMlMkJFdjRFcklQNXE2dDdaMjY4dVF6dllqQUZPTHZ3ZFUyWE9Bd1pERXhRMk5ldEhaSWc1VnRHb0VGandZRGpUZWNXc2w4RXpoOWdqbmVZWTRRUjZxWGtTNUZMS1FuZmkxekU5JTJGRmglMkZJM0lrejlHbkx6cDhxOUYlMkZvc3VwJTJCU1BNYWY3WFg2WTB2JTJGaWN0TDdNZVIlMkIyNzR6cTlqV2EwMVBYZ0ElM0QlM0MlMkZkaWFncmFtJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIyVExmNkd1azZJZjQ2bExsQ2dRbW8lMjIlMjBuYW1lJTNEJTIyUGFnZS00JTIyJTNFM1pWQlQ0TXdGTWMlMkZEVWNUYUFmQ2NVNTBCNDJISFRUZU92cUF4a0pKS1lQdDAxdEdHZUNXbUNWVEYwJTJCMCUyRiUyRmY2SHUlMkZYZjFJTEw3TG1VWklpZlJZVXVJVnMybGo0M2tMSWNXeFBmMXBsMnlsQmNOc0ppV1RVSkEzQ2l1M0FpTFpSSzBhaG5DUXFJYmhpeFZTTVJKNURwQ1lha1ZMVTA3Ulk4R25YZ2lSd0pLd2l3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"></p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="types">Types<a class="hash-link" href="#types" title="Direct link to heading">â€‹</a></h5><p>We also want to be able to list of the transactions of a given type, this is useful when the starts and fill memory tables but also to list transactions in UI or API for network transactions.</p><p>Then a index is given by type for this purpose where the addresses are appended</p><p><img src="/archethic-docs/assets/images/type_index-7d73c323ed94d760c7913a71bb3752be.png"></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="memory-indexes">Memory indexes<a class="hash-link" href="#memory-indexes" title="Direct link to heading">â€‹</a></h4><p>Among the files indexes for backup or long term storage, we are proving some in memory indexes (a bit like Log structured Hash tables) to read data with predictable latency.
This make reads fast.</p><p><img src="/archethic-docs/assets/images/memory_index-8b745de23265c24b29a6b68889747e0f.png"></p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="transaction-index">Transaction index<a class="hash-link" href="#transaction-index" title="Direct link to heading">â€‹</a></h5><p>This index works a bit like a chache and is identified by a transaction address with the following information:</p><ul><li>genesis address</li><li>offset</li><li>size</li></ul><p>So once the a transaction is present in this cache, we can easily read transaction give information about the position of the file, and read it really quickly.</p><p>But if the transaction is not present, we can easily use the index summary as fallback, to identify the file and the offset.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="chain-stats">Chain stats<a class="hash-link" href="#chain-stats" title="Direct link to heading">â€‹</a></h5><p>This index is built from the genesis chain files and contains information about the number of transactions within and the last offset.
So during the write, the transaction index/summary is notified about the last offset of the chain, and help to move forward in the location of new transaction. </p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="last-index">Last index<a class="hash-link" href="#last-index" title="Direct link to heading">â€‹</a></h5><p>As we mentioned in the last addresses chain index file, we need to quickly know what is the last address of a chain, so here we a cache, we says for a given genesis address what is the latest.</p><p>So this table is filled every time a node receives a last address notification.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="type-index">Type index<a class="hash-link" href="#type-index" title="Direct link to heading">â€‹</a></h5><p>Because we have type index file, we can also leverages a memory index to know how many transactions for a given type exists.
This is useful for key derivation for network transactions.
So we can easily and quickly get the size of a chain.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="bloom-filters">Bloom filters<a class="hash-link" href="#bloom-filters" title="Direct link to heading">â€‹</a></h5><p>While indexes are great addition to avoid disk I/O, sometimes we need to fetch data to check or not its existence.
However, we can use data structures which can help us to avoid unnecessary reads.</p><p>Other databases usually leverages <code>Bloom filters</code> which are probabilistic way to assert something true.
So it cannot have false positive.</p><p>Then this structure helps to asserts a transaction exists, and if so, we can read from disk information, if needed.</p><p>In order to make it works, each time a transaction is written the bloom filter is updated, where the bytes of the addresses are marked as 1, then we can easily determine if a transaction exists or not.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="chain-reader">Chain reader<a class="hash-link" href="#chain-reader" title="Direct link to heading">â€‹</a></h3><p>Wide column storages provides the capability to extract sub columns information to avoid the load of an entire row in the memory to let the application filter the data.
The filtering can be done on the disk, while make it efficients.</p><p>The behaviour like is a two dimensional key-value pair, where the 1st dimension targets the partition key and the 2nd targets the columns of the row.</p><p>So we achieve a similar approach here, by eing the 1st dimension as the chain file and the 2nd as the list of columns names encoded during the transaction write.</p><ol><li>After being able to get the lookup informations from the chain indexes to identify the file and offset in the file of a given transaction, we <code>seek</code> (put the cursor) at the offset position.</li><li>Then we can sequentially read columns and values and pick the ones we want</li><li>When we reached the end of the transaction (thanks to the size information from the indexes) or the enf of file, we convert those values into a transaction where the values retrieved will be filled in to the structure.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="write-path">Write path<a class="hash-link" href="#write-path" title="Direct link to heading">â€‹</a></h3><p><img src="/archethic-docs/assets/images/write_path-4491f189ec9042b252c1b632b86d4336.png"></p><p>So in order to be written, a transaction follows a write path to make reads efficient.</p><p>After a transaction is written to disk in the genesis chain file, several disks and memory writes are performed to help the indexing of this transaction.</p><p>Transaction&#x27;s address is written to:</p><ul><li>the summary index from the subset of the transaction (file)</li><li>the last addresses index of the chain (in memory and file)</li><li>the transaction&#x27;s type index (in memory)</li><li>the bloom filters (in memory)</li><li>transaction index (in memory)</li></ul><p>Its public key is also written to the chain&#x27;s public key index. (file)</p><p>Then transaction&#x27;s type in memory index number incremented, as well as the chain stats in memory index.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="read-path">Read path<a class="hash-link" href="#read-path" title="Direct link to heading">â€‹</a></h3><p><img src="/archethic-docs/assets/images/read_path-9a620d8ec68c3034fe7524efe7409647.png"></p><p>To make read efficients, when a transaction wants to be retrieved, it goes to the read path:</p><ul><li>Check if the transaction index is present, if yes we have information about the file and position</li><li>Otherwise we check the bloom filter, if yes, we read the subset summary to identify the position of the transaction, otherwise you inform the transaction does not exists</li><li>Then a reader is able to perform reads according to the fields requested and the position retrieved.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="additional-of-chain-storage">Additional of-chain storage<a class="hash-link" href="#additional-of-chain-storage" title="Direct link to heading">â€‹</a></h2><p>For now, we have covered the scope of chain storage and retrieval, however we also need to persist some data which are not really inserted into a chain and are important for well-being of the node execution.</p><p>So we have to leverage others kind of storages and indexes as simple key-value in memory loaded from disk.</p><p>The scope of those storages are:</p><ul><li>Bootstrapping information (last P2P bootstrapping seeds, storage nonce, last sync date)</li><li>Network statistics (aggregated TPS and nb of transactions)</li><li>P2P view (aggregated node availability from the beacon chain)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-03T08:31:11.000Z">8/3/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/archethic-docs/build/core"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Core development</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/archethic-docs/build/core/p2p/messaging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Messaging</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rationale" class="table-of-contents__link toc-highlight">Rationale</a><ul><li><a href="#log-structured-merge" class="table-of-contents__link toc-highlight">Log Structured Merge</a></li><li><a href="#log-structured-hash-tables" class="table-of-contents__link toc-highlight">Log Structured Hash Tables</a></li><li><a href="#our-approach" class="table-of-contents__link toc-highlight">Our approach</a></li></ul></li><li><a href="#design" class="table-of-contents__link toc-highlight">Design</a><ul><li><a href="#chains-storage" class="table-of-contents__link toc-highlight">Chains storage</a></li><li><a href="#chain-indexing" class="table-of-contents__link toc-highlight">Chain indexing</a></li><li><a href="#chain-reader" class="table-of-contents__link toc-highlight">Chain reader</a></li><li><a href="#write-path" class="table-of-contents__link toc-highlight">Write path</a></li><li><a href="#read-path" class="table-of-contents__link toc-highlight">Read path</a></li></ul></li><li><a href="#additional-of-chain-storage" class="table-of-contents__link toc-highlight">Additional of-chain storage</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/archethic-foundation/archethic-node" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archethic Node<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/archethic-foundation/libjs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archethic Javascript SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/archethic-foundation/libdart" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archethic Dart SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/archethic-foundation/archethic-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archethic Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Archethic Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/archethic-docs/assets/js/runtime~main.b9a2af0e.js"></script>
<script src="/archethic-docs/assets/js/main.aeada748.js"></script>
</body>
</html>